# vi:ft=perl:
create repository freebsd-base.git
end repository

# ignore this stuff
match /ROADMAP.txt
end match
match /projects/GUIDELINES.txt
end match
match /projects/suj/rev.txt
end match
match /user/GUIDELINES.txt
end match
# Skip empty test-commit, that I'm unable to svnsync, maybe it's corrupted?
match /head/.*
min revision 179587
max revision 179587
end match
# Wrong import and back-out
match /head/.*
min revision 254686
max revision 254687
end match
# Skip bogus revision and the backout rev
match /projects/.*
min revision 244485
max revision 244485
end match
match /projects/.*
min revision 244487
max revision 244487
end match
match /svnadmin/.*
end match
# Skip empty vendor dir creation and branch
match /vendor/.*
min revision 355814
max revision 355814
end match
# Skip branch creation and deletion at wrong level
match /user/bz/
min revision 262833
max revision 262834
end match
match /projects/arm_intrng/
min revision 269785
max revision 269786
end match
match /projects/cambria/
min revision 186004
max revision 186007
end match
match /projects/doctools/
min revision 306856
max revision 306858
end match
match /vendor/llvm-project/
min revision 355815
max revision 355815
end match
match /vendor/llvm-project/
min revision 355939
max revision 355939
end match

match /head/
  repository freebsd-base.git
  branch master
end match

match /(cvs2svn)/([^/]+)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3
end match

match /(stable|releng|release)/([0-9.]+)/
  repository freebsd-base.git
  branch \1/\2
end match

match /(releng)/ALPHA_2_0/
  repository freebsd-base.git
  branch \1/2.0a
end match

match /(releng)/BETA_2_0/
  repository freebsd-base.git
  branch \1/2.0b
end match

# special nesting for these
match /(projects)/(graid|multi-fibv6|ofed|pf|suj|zfsd)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3
end match

match /(projects)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2
end match

# /user/piso was created wrong
match /(user)/(piso)/
  repository freebsd-base.git
  branch \1/\2/ipfw_old
  min revision 186541
  max revision 190858
end match
match /(user)/(piso)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3
  min revision 190859
end match
# /head copied into existing branch, later deleted in rev 196663 anyway.
match /(user)/(kmacy)/
  min revision 196075
  max revision 196075
end match
# ignore stuff, no branch for these
match /user/gad/README.txt
end match
match /user/des/Makefile.inc
end match
match /user/rpaulo/asiabsdcon.rb
end match
match /user/simon/test.txt
end match
match /user/peter/foo.txt
end match
# Cannot put .git directories into git, makes it unhappy
match /user/uqs/git_conv/.*\.git/.*
end match

# patch up imports at wrong level
match /(user)/(nwhitehorn)/
  min revision 253490
  max revision 253490
  repository freebsd-base.git
  branch \1/\2/condorports
end match
match /(user)/(peterj)/
  repository freebsd-base.git
  branch \1/\2
end match

# These have extra levels
match /(user)/(dfr)/([^/]+)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match
match /(user)/(gjb)/(hacking)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match

# strip extra head
match /(user)/(eri)/(pf45)/(head)/
  repository freebsd-base.git
  branch \1/\2/\3
end match

match /(user)/([^/]+)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3
end match

# These now live outside of a branch and need to be ignored
match /vendor/.arcconfig
end match
match /vendor/(atf|ldns-host|v4l)/README.*
end match
match /vendor/(apr|apr-util|atf|bzip2|flex|ntp|serf|subversion|tcpdump)/F(REE|ree)BSD-(Xlist|upgrade)
end match
match /vendor/libregex/libgnuregex_prep.sh
end match
match /vendor/bearssl/import.sh
end match
match /vendor/NetBSD/bmake/do-update.sh
end match
match /vendor/NetBSD/bmake/import.sh
end match
match /vendor/NetBSD/((libc-)?(un)?vis|libexecinfo)/FreeBSD-Upgrade
end match
match /vendor/Juniper/libxo/(.svnignore|import.sh)
end match

# fixup trailing dot
match /vendor/(clang|llvm)/(clang|llvm)-(r73070)\./
  repository freebsd-base.git
  branch vendor/\1/\2-\3
end match

# wrong tag, ignore r210074 and r210075
match /vendor/(clang|llvm)-(r108243)/
end match

# wrong tag and backout revs
match /vendor/
  min revision 261332
  max revision 261333
end match
match /vendor/
  min revision 230833
  max revision 230834
end match

# r262569 committed one level short
match /vendor/device-tree/
  min revision 262569
  max revision 262569
  repository freebsd-base.git
  branch vendor/device-tree/dist
end match

# `unknown` vendor is one level short
match /(vendor)/(unknown)/
  repository freebsd-base.git
  branch \1/\2
end match

# /vendor/NetBSD has a mix of 2-level and 3-level dirs :/
# TODO(uqs): fix this somehow?

# r282579 renamed a whole bunch of vendor branches and results in backup tags.
# r282582 and r282585 moved some more.
# r253716 is also relevant here, resurrecting the deleted gnu-patch. Map the old
# branches to the new ones already, with the twist of removing the redundant
# "gnu" from gnu-sort.
# We need to skip the actual moves, as they moved roots in SVN that don't exist
# in git and the exporter gets confused by that.
# Note that while we could use a recurse rule to skip the deleting and do the
# proper thing for the additions, somehow this does not result in the actual
# SVN revision commit message to be created as a commit on the various
# branches. This is bad in that the history of when the move was done is lost.
# So we can also just skip the move revisions entirely. :/
### match /(vendor)/(awk|bc|bison|cpio|gnu-sort|patch|tar)/
### min revision 282579
### max revision 282579
### end match
### match /(vendor)/misc-GNU/(awk|bc|bison|cpio|gnu-sort|patch|tar)/$
### min revision 282579
### max revision 282579
### action recurse
### end match
match /vendor/.*
min revision 282579
max revision 282579
end match
match /vendor/.*
min revision 282582
max revision 282582
end match
match /vendor/.*
min revision 282584
max revision 282584
end match
match /vendor/.*
min revision 282585
max revision 282585
end match
match /(vendor)/(awk|bc|bison|cpio|cvs|patch|tar|texinfo)/([^/]+)/
  repository freebsd-base.git
  branch \1/misc-GNU/\2/\3
end match
match /(vendor)/gnu-(sort)/([^/]+)/
  repository freebsd-base.git
  branch \1/misc-GNU/\2/\3
end match
match /(vendor)/(misc-GNU)/(awk|bc|bison|cpio|cvs|patch|tar|texinfo)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match
match /(vendor)/(misc-GNU)/gnu-(sort)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match
# NetBSD stuff got moved around in r282584
match /(vendor)/(lukemftpd?|sort)/([^/]+)/
  repository freebsd-base.git
  branch \1/NetBSD/\2/\3
end match
# 4-levels for some of them
match /(vendor)/(NetBSD)/(blacklist|bmake|libc-pwcache|libc-vis|libedit|libexecinfo|lukemftpd?|mknod|mtree|softfloat|sort|tests|unvis|vis|xlint)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match
# something was missing ...
match /(vendor)/(1.14)/
  repository freebsd-base.git
  branch \1/bsnmp/\2
end match

match /(vendor)/(Juniper|google)/([^/]+)/([^/]+)/
  repository freebsd-base.git
  branch \1/\2/\3/\4
end match

# Fix wrong tag, and ignore the fix-up move
match /(vendor)/(tzdata)/(tzdata2000g)/(dist)/
  min revision 191616
  max revision 191616
  repository freebsd-base.git
  branch \1/\2/\3
end match
match /(vendor)/(tzdata)/
  min revision 191617
  max revision 191617
end match
# Another botched import
match /(vendor)/(tzdata)/(tzdata2009m)/(dist)/
  min revision 197595
  max revision 197595
  repository freebsd-base.git
  branch \1/\2/tzdata2009n
end match
match /(vendor)/(tzdata)/(tzdata2009m)/(dist)/
  min revision 197596
  max revision 197596
  #repository freebsd-base.git
  #branch \1/\2/tzdata2009n
end match

match /(vendor|vendor-sys|vendor-cddl|vendor-crypto)/([^/]+)/([^/]+)/
  repository freebsd-base.git
  # drop the different vendor-* prefixes
  branch vendor/\2/\3
end match

# ignore the rest
#match .*
#end match
